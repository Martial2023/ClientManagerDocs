"use strict";(self.webpackChunkclientmanageger_api_docs=self.webpackChunkclientmanageger_api_docs||[]).push([[782],{8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var r=s(6540);const o={},t=r.createContext(o);function l(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),r.createElement(t.Provider,{value:n},e.children)}},8818:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"webhooks","title":"Webhooks","description":"Les webhooks permettent \xe0 ClientManager de notifier les serveurs en temps r\xe9el lorsque le statut d\'une commande change. Cela garantit que les serveurs sont toujours inform\xe9s des mises \xe0 jour importantes concernant les commandes qu\'ils g\xe8rent.","source":"@site/docs/webhooks.md","sourceDirName":".","slug":"/webhooks","permalink":"/ClientManagerDocs/docs/webhooks","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Orders Management","permalink":"/ClientManagerDocs/docs/orders"}}');var o=s(4848),t=s(8453);const l={},a="Webhooks",d={},c=[{value:"Endpoint POST /webhook/order-status",id:"endpoint-post-webhookorder-status",level:3},{value:"Headers",id:"headers",level:4},{value:"Body",id:"body",level:4},{value:"R\xe9ponses",id:"r\xe9ponses",level:4},{value:"Exemple de requ\xeate avec curl",id:"exemple-de-requ\xeate-avec-curl",level:4}];function i(e){const n={br:"br",code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"webhooks",children:"Webhooks"})}),"\n",(0,o.jsx)(n.p,{children:"Les webhooks permettent \xe0 ClientManager de notifier les serveurs en temps r\xe9el lorsque le statut d'une commande change. Cela garantit que les serveurs sont toujours inform\xe9s des mises \xe0 jour importantes concernant les commandes qu'ils g\xe8rent."}),"\n",(0,o.jsxs)(n.p,{children:["Ce webhook est appel\xe9 par le ",(0,o.jsx)(n.strong,{children:"g\xe9rant"})," lorsqu\u2019une commande change de statut.",(0,o.jsx)(n.br,{}),"\n","Les serveurs re\xe7oivent une notification push si la commande est ",(0,o.jsx)(n.code,{children:"VALIDATE"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"endpoint-post-webhookorder-status",children:"Endpoint POST /webhook/order-status"}),"\n",(0,o.jsx)(n.h4,{id:"headers",children:"Headers"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"Content-Type: application/json"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"x-webhook-secret: SECRET"})," (cl\xe9 secr\xe8te)"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"body",children:"Body"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "orderId": "ORD123",\n  "status": "VALIDATE",\n  "tableId": "table123"\n}\n'})}),"\n",(0,o.jsx)(n.h4,{id:"r\xe9ponses",children:"R\xe9ponses"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"200 OK"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n    "ok": true\n}\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"400 Bad Request"})," : Requ\xeate mal form\xe9e (ex: orderId ou status manquant)."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n    "error": "orderId and status are required"\n}\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"401 Unauthorized"})," : Cl\xe9 secr\xe8te invalide."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n    "error": "invalid secret"\n}\n'})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"500 Internal Server Error"})," : Erreur serveur."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n    "error": "Internal server error"\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"exemple-de-requ\xeate-avec-curl",children:"Exemple de requ\xeate avec curl"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'curl -X POST https://ton-api.onrender.com/webhook/order-status \\\n  -H "Content-Type: application/json" \\\n  -H "x-webhook-secret: VOTRE_SECRET" \\\n  -d \'{"orderId":"ORD123","status":"VALIDATE","tableId":"table123"}\'\n'})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(i,{...e})}):i(e)}}}]);